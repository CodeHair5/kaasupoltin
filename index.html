<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="utf-8" />
    <title>Viimeistelty kaasupoltin √§√§nill√§</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <style>
        body { margin: 0; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; background-color: #f0f0f0; }
        canvas { display: block; }
        #info { position: absolute; top: 10px; width: 100%; text-align: center; color: #ccc; font-size: 16px; pointer-events: none; }
        /* KORJATTU: Parempi asettelu eri n√§ytt√∂ko'oille */
        #controls-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            box-sizing: border-box; /* Varmistaa, ett√§ padding ei lis√§√§ leveytt√§ */
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            z-index: 10;
        }
        #buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        button { padding: 12px 24px; font-size: 16px; cursor: pointer; background-color: #ffffff; border: 1px solid #cccccc; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: background-color 0.2s, transform 0.1s; }
        button:hover { background-color: #e9e9e9; }
        button:active { transform: scale(0.98); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        #flame-control-container { display: flex; align-items: center; background-color: rgba(255, 255, 255, 0.9); padding: 10px 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        #flame-control-container label { margin-right: 10px; font-weight: 500; color: #333; }
        #flame-slider { width: 200px; }
        #warning { position: absolute; top: 50%; left: 50%; transform: translate(--50%, -50%); background-color: rgba(255, 100, 100, 0.9); color: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.3); font-size: 18px; text-align: center; z-index: 20; display: none; }
    </style>
</head>
<body>
    <div id="info">Sulje ensin ilma-aukko, vie tulitikku ja sytyt√§.</div>
    <div id="warning"></div>

    <div id="controls-container">
        <div id="flame-control-container">
            <label for="flame-slider">Kaasun s√§√§t√∂:</label>
            <input type="range" id="flame-slider" min="0" max="180" value="0">
        </div>
        <div id="buttons">
            <button id="air-vent-btn">Avaa/Sulje ilma-aukko</button>
            <button id="light-match-btn">Sytyt√§ tulitikku</button>
            <button id="move-match-btn">Vie tulitikku polttimeen</button>
        </div>
    </div>

    <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

    let scene, camera, renderer, controls;
    const clock = new THREE.Clock();
    
    let hanaPivot, suljinObject, suljinInitialPositionY;
    let targetSuljinY = 0;

    let isAirVentOpen = true, isStoveLit = false, isGasValveOpen = false;
    let isMatchMoving = false, isMatchAtBurner = false;
    let flameIntensity = 0;

    let matchstick, matchParticles, matchTip;
    const initialMatchPosition = new THREE.Vector3(-2.5, 2, 2.5);
    const initialMatchQuaternion = new THREE.Quaternion();
    let targetMatchPosition = initialMatchPosition.clone();
    let targetMatchQuaternion = initialMatchQuaternion.clone();

    let burnerParticles, smokeParticles, flameLight, ambientSmoke, cleanSmokeParticles;
    const flameOrigin = new THREE.Vector3(0.0, 3.5, 0.0);

    // LIS√ÑTTY: √Ñ√§nimuuttujat üéµ
    let audioListener, matchStrikeSound, yellowFlameSound, blueFlameSound;

    init();
    animate();

    function init() {
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x404040);
        camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 2000);
        camera.position.set(4.5, 4.0, 6.5);
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.outputEncoding = THREE.sRGBEncoding;
        document.body.appendChild(renderer.domElement);
        controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.target.set(0, 1.5, 0);
        const ambient = new THREE.AmbientLight(0xffffff, 1.3);
        scene.add(ambient);
        const dir = new THREE.DirectionalLight(0xffffff, 2.2);
        dir.position.set(5, 10, 7.5);
        scene.add(dir);
        flameLight = new THREE.PointLight(0xffc04d, 0, 8.0, 2.0);
        flameLight.position.copy(flameOrigin).add(new THREE.Vector3(0, 0.4, 0));
        scene.add(flameLight);
        loadModel();
        createBurnerParticles();
        createSmokeSystem();
        createAmbientSmoke();
        createCleanSmoke();
        createMatchstick();
        setupControls();
        initAudio(); // LIS√ÑTTY: Kutsutaan √§√§nien alustusfunktiota
        window.addEventListener('resize', onWindowResize, false);
    }

    // LIS√ÑTTY: Funktio √§√§nien alustamiseen ja lataamiseen
    function initAudio() {
        audioListener = new THREE.AudioListener();
        camera.add(audioListener);
        const audioLoader = new THREE.AudioLoader();

        matchStrikeSound = new THREE.Audio(audioListener);
        audioLoader.load('tulitikku.mp3', (buffer) => {
            matchStrikeSound.setBuffer(buffer);
            matchStrikeSound.setVolume(0.8);
        });

        yellowFlameSound = new THREE.Audio(audioListener);
        audioLoader.load('keltainen.mp3', (buffer) => {
            yellowFlameSound.setBuffer(buffer);
            yellowFlameSound.setLoop(true);
        });

        blueFlameSound = new THREE.Audio(audioListener);
        audioLoader.load('sininen.mp3', (buffer) => {
            blueFlameSound.setBuffer(buffer);
            blueFlameSound.setLoop(true);
        });
    }

    function loadModel() {
        const loader = new GLTFLoader();
        loader.load('kaasupoltin(2).glb', (gltf) => {
            scene.add(gltf.scene);
            const hanaOriginal = gltf.scene.getObjectByName('Hana');
            if (hanaOriginal) {
                const center = new THREE.Box3().setFromObject(hanaOriginal).getCenter(new THREE.Vector3());
                hanaPivot = new THREE.Group();
                hanaOriginal.parent.add(hanaPivot);
                hanaPivot.add(hanaOriginal);
                hanaPivot.position.copy(center);
                hanaOriginal.position.sub(center);
            }
            suljinObject = gltf.scene.getObjectByName('Aukon_suljin');
            if (suljinObject) {
                suljinInitialPositionY = suljinObject.position.y;
                targetSuljinY = suljinInitialPositionY; 
            }
        }, undefined, (err) => console.error('Virhe GLB-latauksessa:', err));
    }

    function createMatchstick() {
        matchstick = new THREE.Group();
        const shaft = new THREE.Mesh( new THREE.CylinderGeometry(0.04, 0.04, 2, 8), new THREE.MeshStandardMaterial({ color: 0xdeb887 }) );
        matchstick.add(shaft);
        matchTip = new THREE.Mesh( new THREE.SphereGeometry(0.08, 8, 8), new THREE.MeshStandardMaterial({ color: 0x8b0000 }) );
        matchTip.position.y = 1.0;
        matchstick.add(matchTip);
        const positions = new Float32Array(450), colors = new Float32Array(450);
        for(let i=0; i<150; i++) { const i3=i*3; positions[i3]=(Math.random()-.5)*.15; positions[i3+1]=.3*Math.random(); positions[i3+2]=(Math.random()-.5)*.15; colors[i3]=1; colors[i3+1]=.7-.3*Math.random(); colors[i3+2]=.2 }
        const particleGeom = new THREE.BufferGeometry();
        particleGeom.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        particleGeom.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        matchParticles = new THREE.Points(particleGeom, new THREE.PointsMaterial({ size: 0.08, vertexColors: true, map: generateFlameSprite(), blending: THREE.AdditiveBlending, depthWrite: false, transparent: true, opacity: 0.8 }));
        matchstick.position.copy(initialMatchPosition);
        matchstick.visible = false;
        matchParticles.visible = false;
        scene.add(matchstick, matchParticles);
    }

    function setupControls() {
        document.getElementById('air-vent-btn').addEventListener('click', () => {
            isAirVentOpen = !isAirVentOpen;
            if (suljinObject) {
                targetSuljinY = isAirVentOpen ? suljinInitialPositionY : suljinInitialPositionY - 0.2306;
            }
        });
        document.getElementById('light-match-btn').addEventListener('click', () => {
            if (isStoveLit) return showWarning("Kaasupoltin on jo p√§√§ll√§!");
            
            // LIS√ÑTTY: Toistetaan tulitikun √§√§ni
            if (audioListener.context.state === 'suspended') { audioListener.context.resume(); }
            if (matchStrikeSound && !matchStrikeSound.isPlaying) matchStrikeSound.play();

            targetMatchPosition.copy(initialMatchPosition);
            targetMatchQuaternion.copy(initialMatchQuaternion);
            matchstick.position.copy(initialMatchPosition);
            matchstick.quaternion.copy(initialMatchQuaternion);
            matchstick.visible = true;
            isMatchMoving = false;
            isMatchAtBurner = false;
            if (matchTip) matchTip.material.color.set(0x8b0000); 
        });
        document.getElementById('move-match-btn').addEventListener('click', () => {
            if (!matchstick.visible) return;
            targetMatchPosition.set(0, 3.9, 1);
            targetMatchQuaternion.setFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
            isMatchMoving = true;
        });
        document.getElementById('flame-slider').addEventListener('input', (e) => {
            const sliderValue = parseInt(e.target.value);
            const wasGasValveOpen = isGasValveOpen;
            isGasValveOpen = sliderValue >= 10;
            flameIntensity = sliderValue / 180;
            if (hanaPivot) hanaPivot.rotation.z = -THREE.MathUtils.degToRad(sliderValue);
            
            if (!wasGasValveOpen && isGasValveOpen && !isStoveLit && !isMatchAtBurner) {
                showWarning("Vie ensin tulitikku polttimolle ennen kaasun avaamista!");
                resetGasValve();
            }
            if (isGasValveOpen && isMatchAtBurner && !isStoveLit) {
                if (isAirVentOpen) {
                    showWarning("Ilma-aukon tulee olla kiinni sytytett√§ess√§!");
                    resetGasValve();
                } else {
                    lightStove();
                }
            } else if (!isGasValveOpen && isStoveLit) {
                extinguishStove();
            }
        });
    }

    function resetGasValve() {
        const flameSlider = document.getElementById('flame-slider');
        if (flameSlider) flameSlider.value = 0;
        isGasValveOpen = false;
        flameIntensity = 0;
        if (hanaPivot) hanaPivot.rotation.z = 0;
    }
    
    function lightStove() { isStoveLit = true; matchstick.visible = false; if (matchParticles) matchParticles.visible = false; matchstick.position.set(0, -100, 0); if (matchTip) matchTip.material.color.set(0x1a1a1a); isMatchAtBurner = false; }
    function extinguishStove() { 
        isStoveLit = false; 
        // LIS√ÑTTY: Pys√§ytet√§√§n kaikki liekin √§√§net, kun poltin sammutetaan
        if (yellowFlameSound && yellowFlameSound.isPlaying) yellowFlameSound.stop();
        if (blueFlameSound && blueFlameSound.isPlaying) blueFlameSound.stop();
    }
    function showWarning(message) { const el = document.getElementById('warning'); el.textContent = message; el.style.display = 'block'; setTimeout(() => { el.style.display = 'none'; }, 2500); }

    function generateFlameSprite(){const c=document.createElement("canvas");c.width=32,c.height=32;const t=c.getContext("2d"),e=t.createRadialGradient(16,16,0,16,16,16);return e.addColorStop(0,"rgba(255,255,255,0.9)"),e.addColorStop(.3,"rgba(255,200,50,0.8)"),e.addColorStop(.7,"rgba(255,100,0,0.6)"),e.addColorStop(1,"rgba(255,50,0,0)"),t.fillStyle=e,t.fillRect(0,0,32,32),new THREE.CanvasTexture(c)}
    function generateSmokeSprite(){const c=document.createElement("canvas");c.width=32,c.height=32;const t=c.getContext("2d"),e=t.createRadialGradient(16,16,0,16,16,16);return e.addColorStop(0,"rgba(100,100,100,0.5)"),e.addColorStop(.5,"rgba(80,80,80,0.3)"),e.addColorStop(1,"rgba(60,60,60,0)"),t.fillStyle=e,t.fillRect(0,0,32,32),new THREE.CanvasTexture(c)}
    function createBurnerParticles(){const t=new THREE.BufferGeometry,e=new Float32Array(2100),a=new Float32Array(2100),o=new Float32Array(2100),i=new Float32Array(700);t.setAttribute("position",new THREE.BufferAttribute(e,3)),t.setAttribute("color",new THREE.BufferAttribute(a,3)),t.setAttribute("velocity",new THREE.BufferAttribute(o,3)),t.setAttribute("age",new THREE.BufferAttribute(i,1));const n=new THREE.PointsMaterial({size:.12,vertexColors:!0,transparent:!0,opacity:.9,depthWrite:!1,blending:THREE.AdditiveBlending,map:generateFlameSprite()});burnerParticles=new THREE.Points(t,n),burnerParticles.position.copy(flameOrigin),burnerParticles.visible=!1,scene.add(burnerParticles)}
    function createSmokeSystem(){const t=new THREE.BufferGeometry,e=new Float32Array(600),a=new Float32Array(600),o=new Float32Array(200);for(let i=0;i<200;i++){ const n=3*i; e[n]=.5*(Math.random()-.5); e[n+1]=1.0 + 1.0 * Math.random(); e[n+2]=.5*(Math.random()-.5); a[n]=.008*(Math.random()-.5); a[n+1]=.012*Math.random()+.015; a[n+2]=.008*(Math.random()-.5); }t.setAttribute("position",new THREE.BufferAttribute(e,3)),t.setAttribute("velocity",new THREE.BufferAttribute(a,3)),t.setAttribute("age",new THREE.BufferAttribute(o,1)),smokeParticles=new THREE.Points(t,new THREE.PointsMaterial({size:.2,color:4473924,transparent:!0,opacity:.4,depthWrite:!1,map:generateSmokeSprite()})),smokeParticles.position.copy(flameOrigin),smokeParticles.visible=!1,scene.add(smokeParticles)}
    function createAmbientSmoke(){const t=new THREE.BufferGeometry,e=new Float32Array(900),a=new Float32Array(900);for(let o=0;o<300;o++){ const i=3*o; e[i]=1.5*(Math.random()-.5); e[i+1]=1.5 + 1.5 * Math.random(); e[i+2]=1.5*(Math.random()-.5); a[i]=.005*(Math.random()-.5),a[i+1]=.008*Math.random()+.01,a[i+2]=.005*(Math.random()-.5); }t.setAttribute("position",new THREE.BufferAttribute(e,3)),t.setAttribute("velocity",new THREE.BufferAttribute(a,3)),ambientSmoke=new THREE.Points(t,new THREE.PointsMaterial({size:.25,color:3355443,transparent:!0,opacity:.15,depthWrite:!1,map:generateSmokeSprite()})),ambientSmoke.position.copy(flameOrigin),ambientSmoke.visible=!1,scene.add(ambientSmoke)}
    function createCleanSmoke() {const geom = new THREE.BufferGeometry(); const positions = new Float32Array(150), velocities = new Float32Array(150), ages = new Float32Array(50); for (let i = 0; i < 50; i++) { const i3 = i * 3; positions[i3] = (Math.random() - 0.5) * 0.2; positions[i3 + 1] = Math.random() * 0.5; positions[i3 + 2] = (Math.random() - 0.5) * 0.2; velocities[i3] = (Math.random() - 0.5) * 0.004; velocities[i3 + 1] = Math.random() * 0.008 + 0.01; velocities[i3 + 2] = (Math.random() - 0.5) * 0.004; } geom.setAttribute("position", new THREE.BufferAttribute(positions, 3)); geom.setAttribute("velocity", new THREE.BufferAttribute(velocities, 3)); geom.setAttribute("age", new THREE.BufferAttribute(ages, 1)); cleanSmokeParticles = new THREE.Points(geom, new THREE.PointsMaterial({ size: .1, color: 0x555555, transparent: true, opacity: .2, depthWrite: false, map: generateSmokeSprite() })); cleanSmokeParticles.position.copy(flameOrigin); cleanSmokeParticles.visible = false; scene.add(cleanSmokeParticles);}

    function animateParticles(t){
        burnerParticles.visible = isStoveLit;
        smokeParticles.visible = isStoveLit && !isAirVentOpen;
        ambientSmoke.visible = isStoveLit && !isAirVentOpen;
        cleanSmokeParticles.visible = isStoveLit && isAirVentOpen;

        // LIS√ÑTTY: Liekin √§√§nen ohjauslogiikka
        if (isStoveLit) {
            if (isAirVentOpen) { // Sininen liekki
                if (yellowFlameSound && yellowFlameSound.isPlaying) yellowFlameSound.stop();
                if (blueFlameSound && !blueFlameSound.isPlaying) blueFlameSound.play();
            } else { // Keltainen liekki
                if (blueFlameSound && blueFlameSound.isPlaying) blueFlameSound.stop();
                if (yellowFlameSound && !yellowFlameSound.isPlaying) yellowFlameSound.play();
            }
        }

        if (isStoveLit) {
            let n; 
            if (isAirVentOpen) { n = .4 + 2.5 * flameIntensity * 0.5; } else { n = .8 + 2.5 * flameIntensity; }
            const e=burnerParticles.geometry.attributes.position.array, a=burnerParticles.geometry.attributes.color.array, o=burnerParticles.geometry.attributes.velocity.array, i=burnerParticles.geometry.attributes.age.array;
            for (let s=0; s<700; s++) {
                const r=3*s; i[s]+=2*t; const l=.001*Math.sin(3*i[s]); o[r]+=l*(Math.random()-.5), o[r+2]+=l*(Math.random()-.5), o[r+1]+=18e-5*t*60, e[r]+=o[r]*t*60, e[r+1]+=o[r+1]*t*60, e[r+2]+=o[r+2]*t*60;
                const d=e[r+1], c=1-d/n, fade=Math.max(0,1-d/n);
                if (isAirVentOpen) { a[r]=.1*fade, a[r+1]=.15*c*fade, a[r+2]=1*fade; } else { a[r]=1*fade, a[r+1]=Math.max(.2,.9-d/n*1.2)*fade, a[r+2]=.1*fade; }
                (d>n||i[s]>3)&&(e[r]=.3*(Math.random()-.5),e[r+1]=0,e[r+2]=.3*(Math.random()-.5),o[r]=.015*(Math.random()-.5),o[r+1]=.025*Math.random()+.03*(.5+flameIntensity),o[r+2]=.015*(Math.random()-.5),i[s]=0)
            }
            burnerParticles.geometry.attributes.position.needsUpdate=!0, burnerParticles.geometry.attributes.color.needsUpdate=!0;
            if (isAirVentOpen) {
                const cleanSmokePos = cleanSmokeParticles.geometry.attributes.position.array, cleanSmokeVel = cleanSmokeParticles.geometry.attributes.velocity.array, cleanSmokeAges = cleanSmokeParticles.geometry.attributes.age.array;
                for (let i=0; i<50; i++) { const s=3*i; cleanSmokeAges[i]+=t; cleanSmokePos[s]+=cleanSmokeVel[s]*t*60; cleanSmokePos[s+1]+=cleanSmokeVel[s+1]*t*60; cleanSmokePos[s+2]+=cleanSmokeVel[s+2]*t*60; if(cleanSmokePos[s+1]>n*.8||cleanSmokeAges[i]>2){cleanSmokePos[s]=.2*(Math.random()-.5),cleanSmokePos[s+1]=0,cleanSmokePos[s+2]=.2*(Math.random()-.5); cleanSmokeVel[s]=(Math.random()-.5)*.004; cleanSmokeVel[s+1]=.008*Math.random()+.01; cleanSmokeVel[s+2]=(Math.random()-.5)*.004; cleanSmokeAges[i]=0}}
                cleanSmokeParticles.geometry.attributes.position.needsUpdate = true;
            }
            if (!isAirVentOpen) {
                const e=smokeParticles.geometry.attributes.position.array,a=smokeParticles.geometry.attributes.velocity.array,o=smokeParticles.geometry.attributes.age.array; for(let i=0;i<200;i++){const s=3*i;o[i]+=t,e[s]+=a[s]*t*60,e[s+1]+=a[s+1]*t*60,e[s+2]+=a[s+2]*t*60,a[s]*=1.01,a[s+2]*=1.01,(e[s+1]>1.5*n||o[i]>4)&&(e[s]=.2*(Math.random()-.5),e[s+1]=.8*n,e[s+2]=.2*(Math.random()-.5),a[s]=.008*(Math.random()-.5),a[s+1]=.012*Math.random()+.015,a[s+2]=.008*(Math.random()-.5),o[i]=0)}
                smokeParticles.geometry.attributes.position.needsUpdate=!0; const i=ambientSmoke.geometry.attributes.position.array,s=ambientSmoke.geometry.attributes.velocity.array; for(let r=0;r<300;r++){const l=3*r;i[l]+=s[l]*t*60,i[l+1]+=s[l+1]*t*60,i[l+2]+=s[l+2]*t*60,i[l+1]>3*n&&(i[l]=.4*(Math.random()-.5),i[l+1]=n,i[l+2]=.4*(Math.random()-.5),s[l]=.005*(Math.random()-.5),s[l+1]=.008*Math.random()+.01,s[l+2]=.005*(Math.random()-.5))}
                ambientSmoke.geometry.attributes.position.needsUpdate=!0
            }
        }
        if(matchParticles.visible=matchstick.visible,matchstick.visible&&matchTip){const t=new THREE.Vector3;matchTip.getWorldPosition(t),matchParticles.position.copy(t);const e=matchParticles.geometry.attributes.position.array,a=matchParticles.geometry.attributes.color.array;for(let o=0;o<150;o++){const i=3*o,n=e[i+1];e[i+1]+=.02,e[i+1]>.4&&(e[i]=.1*(Math.random()-.5),e[i+1]=0,e[i+2]=.1*(Math.random()-.5));const s=Math.max(0,1-n/.4),r=.8+.2*Math.random();a[i]=r*s,a[i+1]=r*(.7-.3*Math.random())*s,a[i+2]=.2*s}matchParticles.geometry.attributes.position.needsUpdate=!0,matchParticles.geometry.attributes.color.needsUpdate=!0}
    }

    function animate() {
        requestAnimationFrame(animate);
        const delta = clock.getDelta();
        if (isMatchMoving) {
            matchstick.position.lerp(targetMatchPosition, 0.05);
            matchstick.quaternion.slerp(targetMatchQuaternion, 0.05);
            if (matchstick.position.distanceTo(targetMatchPosition) < 0.05) {
                isMatchMoving = false;
                isMatchAtBurner = true;
            }
        }
        if (suljinObject) {
            suljinObject.position.y += (targetSuljinY - suljinObject.position.y) * 0.1;
        }
        if (isStoveLit) {
            flameLight.visible = true;
            flameLight.intensity = flameIntensity * 5.5;
            flameLight.color.set(isAirVentOpen ? 0x2040ff : 0xffa500);
            const flicker = 0.9 + Math.sin(clock.elapsedTime * 10) * 0.1;
            flameLight.intensity *= flicker;
        } else {
            flameLight.visible = false;
        }
        animateParticles(delta);
        controls.update();
        renderer.render(scene, camera);
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }
    </script>
</body>
</html>